angular.module("iui.alertModule",["iui.alertTemplates","iui.alerts"]);var iuiAlertsModule=angular.module("iui.alerts",["iui.toTrusted"]);iuiAlertsModule.directive("iuiAlertPlaceholder",["iuiAlertService",function(iuiAlertService){"use strict";return{restrict:"E",scope:{},templateUrl:app.root+"$iui-alerts/alerts/iui-alert-placeholder.html",link:function(scope,element,attrs){var alertId=attrs.id;scope.placementAlerts=iuiAlertService.getCurrent(alertId),iuiAlertService.clear(alertId),scope.closeAlert=function(){iuiAlertService.closeAlert(alertId)}}}}]),iuiAlertsModule.factory("iuiAlertService",["$timeout",function(timeout){"use strict";var defaultTimeOut=2e4,placements={},DEFAULT_PLACEMENT="alert_appTop";return{getCurrent:function(id){return placements[id||DEFAULT_PLACEMENT]},addPlacement:function(id){placements[id]||(placements[id]={})},add:function(placement,alertObject){var type=alertObject.type,message=alertObject.message,activeFor=alertObject.activeFor||0,callback=alertObject.callback,canClose=alertObject.canClose;placement=placement||DEFAULT_PLACEMENT;var currentPlacement=placements[placement];currentPlacement||(currentPlacement=placements[placement]={}),"danger"===type&&(activeFor=0),currentPlacement.callback=callback,currentPlacement.alert={type:type,message:message,placement:placement,activeFor:activeFor,canClose:canClose,close:function(){return asvc.closeAlert()}},currentPlacement.promise&&timeout.cancel(currentPlacement.promise),0!==activeFor&&(currentPlacement.promise=timeout(function(){currentPlacement.alert={},currentPlacement.callback&&currentPlacement.callback()},void 0!==activeFor?activeFor:defaultTimeOut))},closeAlert:function(id){var placement=this.getCurrent(id);placement.alert={},timeout.cancel(placement.promise),placement.callback&&placement.callback()},clearAll:function(){_.each(placements,function(placement){placement.alert={},timeout.cancel(placement.promise)})},clear:function(id){if(id){var current=this.getCurrent(id);if(!current)return;current.alert={},timeout.cancel(current.promise)}else this.clearAll()}}}]),angular.module("iui.toTrusted",[]).filter("to_trusted",["$sce",function($sce){"use strict";return function(text){return $sce.trustAsHtml(text)}}]),function(module){try{module=angular.module("iui.alertTemplates")}catch(e){module=angular.module("iui.alertTemplates",[])}module.run(["$templateCache",function($templateCache){$templateCache.put("/$iui-alerts/alerts/iui-alert-placeholder.html",'<div \n  ng-if="placementAlerts.alert.message" \n  class="alert-wrapper">\n    <div \n      class="alert alert-{{placementAlerts.alert.type}}" \n      role="alert">\n	    <span \n	    	class="alert-message" \n	    	ng-bind-html="placementAlerts.alert.message | to_trusted">\n	    </span>\n	    <button \n	    	ng-if="placementAlerts.alert.canClose"\n	    	type="button" \n	    	class="close" \n	    	aria-label="Close" \n	    	ng-click="closeAlert()">\n	    	<span aria-hidden="true">&times;</span>\n	    </button>\n    </div>\n</div>')}])}();